WidgetExplorer = {};WidgetExplorer.lastFlush = new Date() - 5;WidgetExplorer.flush = function(userID){	//flush all past user data	var toDelete = ds.AutoUser.query('lastLogin < :1', new Date() -1);	toDelete.forEach(function(theUser){		theUser.companies.remove();		theUser.people.remove();		theUser.pics.remove();		theUser.files.remove();//		theUser.remove(); //To remove the user entity as well			});	}WidgetExplorer.initUser = function(){	var token = currentSession().promoteWith('admin');	//create sample data for a new account based on the current date	var theDate = new Date();		//--------------- Companies	//Populate data arrays for records	var companyNames = ['Base TDC', 'Bayside & Ellerson', 'Calverton', 'EB Films', 'Fend Industries', 'Foundation Systems Inc.',						'TLC Gift Wrapping', 'Growth Fund Group', 'Hero Guitars', 'Home Team Network', 'Hydra Inc.', 'Moneywise Financial',						'Bandlion Krafts', 'Stations Incorporated', 'TCA Group', 'Towerline', 'True Investment Systems Inc.', 'WT Services Corp'];	var companyLogoFiles = ['basetdc', 'bayside', 'calverton', 'ebfilms', 'fend', 'foundation', 'gift', 'growthfund', 'hero', 'hometeam',							'hydra', 'moneywise', 'redyellow', 'stations', 'tca', 'towerline', 'true', 'wtservices'];	var companyURLs = ['basetdc.org', 'baysideellerson.com', 'calverton.com', 'ebfilms.ca', 'fendindustries.com', 						'foundation.com', 'tlcgiftsonline.com', 'growthfund.com', 'heroguitarhero.com', 'hometeamtoday.com',						'hydraincorporated.com', 'moneywise.net', 'bandlion.ca', 'stations.com', 'tcagroup.com', 'towerline.com',						'trueinvestments.com', 'wtservicescorporation.com']	var companyAddresses = ['1121 Riverside Dr.', '18332 Calton Line', '99 Circle Cork Place', '723 Davis Ave.', '99-773 Tantina Rd.', '2212 Teledon Rd.', '12-3322 Force St.', '7736 Blake St.', '66533 Caldon Rd.', '54554 Oxford St.',							'98 Tension Rd.', '12223 Cliftonvale Blvd.', '4-498 Station Park Place', '99443 Everest Heights Rd.', '88333 Quelton St.', '4544 Criston Sideroad', '6644 Weldon Park Rd.', '6544 Canton Rd.'];	var companyCities = ['New York', 'Chicago', 'London', 'London', 'Toronto', 'San Jose', 'Detroit', 'Dearborn', 'Victoria', 'Abbotsford',							'Calgary', 'Austin', 'Arlington', 'Halifax', 'Montreal', 'Seattle', 'Tampa', 'Charlotteville'];	var companyStates = ['NY', 'IL', 'ON', 'CA', 'ON', 'CA', 'MI', 'MI', 'BC', 'BC',							'AB', 'TX', 'VA', 'NS', 'QB', 'WA', 'FL', 'NC'];	var companyCountries = ['USA', 'USA', 'Canada', 'USA', 'Canada', 'USA', 'USA', 'USA', 'Canada', 'Canada',							'Canada', 'USA', 'USA', 'Canada', 'Canada', 'USA', 'USA', 'USA'];	var companyTelephones = ['9959958875', '2263773884', '3776640900', '7760909988', '5198887763', '2264487773', '6635544993', '6635529987', '7098887331', '5399887777',							'2767775384', '7764499953', '3378869938', '2263332228', '8843343322', '8008873336', '2877600087', '2340987645'];	var companyIndustries = ['Medical', 'Industrial', 'Industrial', 'Government', 'Medical', 'Government', 'Technology', 'Technology', 'Industrial', 'Technology',							'Industrial', 'Industrial', 'Medical', 'Government', 'Medical', 'Medical', 'Industrial', 'Medical'];			var resourcesFolder = getFolder().path + 'resources'; //gets the project folder path	var theImage = '';		var theCompany = "";	//create each company based on arrays	for(i = 0 ; i < companyNames.length ; i++){		theLogo = loadImage(resourcesFolder + '/logos/' + companyLogoFiles[i] + '.png'); //Get the logo into an image//		theCompany = new ds.Company({name: companyNames[i], logo: theLogo, url: companyURLs[i], autoUser: user});		theCompany = new ds.Company({name: companyNames[i], address: companyAddresses[i], city: companyCities[i], stateProv: companyStates[i], country: companyCountries[i],		telephone: companyTelephones[i], url: companyURLs[i], industry: companyIndustries[i], logo: theLogo});		theCompany.save();	}	//--------------- People	var femaleFirstNames = ['Barb', 'Kelly', 'Wendy', 'Sally', 'Simone', 'Geraldine', 'Ann', 'Pat', 'Tricia', 'Beth', 'Nina', 'Stephanie', 'Christina', 'Kim', 'Kimberly',							'Carmen', 'Dorothy', 'Eunice', 'Sandy', 'Elizabeth', 'Shelly', 'Courtney', 'Chloe', 'Emily', 'Emma', 'Julie', 'Margaret', 'Heather', 'Paula',							'Melinda', 'Tracy', 'Angela', 'Amy', 'Florence', 'Faizal', 'Trinity', 'Ashley', 'Susan', 'Suzanne', 'Camilla', 'Trudy', 'Chrystal'];	var maleFirstNames = ['Bob', 'Jim', 'James', 'Kevin', 'William', 'Douglas', 'Chuck', 'Richard', 'Dave', 'David', 'Chris', 'Greg', 'Ben', 'Laurent', 'Nick', 'Glenn',							'Dean', 'John', 'Johnathan', 'Wilbur', 'Dale', 'Rob', 'Robert', 'Davis', 'Winston', 'Isaac', 'Phil', 'Edward', 'Ed', 'Charles', 'Kirk',							'Willy', 'Chester', 'Carl', 'Vito', 'Peter', 'Hans', 'Dennis', 'Bill', 'Sam', 'Samuel', 'Roger', 'Vinny', 'Vince', 'Ernie', 'Tom', 'Eddy'];	var lastNames = ['Smith', 'Wilson', 'Davis', 'Davidson', 'Macauley', 'McLean', 'Hall', 'Winters', 'Totten', 'Hawes', 'Tether', 'McCabe', 'Weathers', 'Sinclair', 'Heathrow',					'Weldon', 'Jordan', 'Jesslop', 'Tandem', 'LeClaire', 'Belleveau', 'Darling', 'Hunt', 'Huntsman', 'Erlang', 'Burgess', 'Logie', 'Tilts', 'Mitton', 'Teltale',					'Brand', 'Bishop', 'Ball', 'McCall', 'Kools', 'Komarik', 'Germansky', 'Teller', 'Wickers', 'Vick', 'Tomas', 'Gendron', 'Kitch', 'Skelly', 'Barnstrom'];	var categories = ['Platinum', 'Gold', 'Silver'];					//Create an array of female portraits	var folder = Folder(getFolder().path + 'resources/people/Women/');	var femaleFilePaths = [];	folder.each(function(file) {		//console.log(file.path);		femaleFilePaths.push(file.path); // store the file path	 });		folder = Folder(getFolder().path + 'resources/people/Men/');	var maleFilePaths = [];	folder.each(function(file) {		maleFilePaths.push(file.path); // store the file path	 });	//Build 200 random people with pictures	var gender = 1; //1 for man, 0 for woman	var firstName = "";	var lastName = "";	var employer = "";	var photo = "";	var birthdate = new Date();	var salary = 0;	var email = "";	var person = {};		//parent function created user session to list companies re: permissions	for(i = 0; i < 200 ; i++){		gender = Math.floor(Math.random()*2); //Random number 1 or 0		lastName = lastNames[Math.floor(Math.random() * lastNames.length)] //get a random lastName		userCompanies = ds.Company.all(); //Limit the companies that can be employers to the companies of this user		employer = userCompanies[Math.floor(Math.random() * (userCompanies.length))];		birthdate = new Date(Math.floor(Math.random()*799965158463));		category = categories[Math.floor(Math.random()*3)];		salary = Math.floor(Math.random()*300) *1000;		if(gender == 1){ //add a man			photo = loadImage(maleFilePaths[Math.floor(Math.random() * maleFilePaths.length)]); //Get the photo into an image			firstName = maleFirstNames[Math.floor(Math.random() * maleFirstNames.length)];		} else { //add a woman			photo = loadImage(femaleFilePaths[Math.floor(Math.random() * femaleFilePaths.length)]); //Get the photo into an image			firstName = femaleFirstNames[Math.floor(Math.random() * femaleFirstNames.length)];		}		email = (firstName.substr(0,1) + lastName).toLowerCase() + "@" + employer.url;		person = new ds.Person({firstName: firstName, lastName: lastName, employer: employer, photo: photo, married: Math.floor(Math.random()*2), birthdate: birthdate, email: email, salary: salary, category: category } );		person.save();	}	currentSession().unPromote(token);}